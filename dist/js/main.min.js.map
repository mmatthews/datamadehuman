{"version":3,"sources":["main.js","form.js","global.js","modal.js","sliders.js"],"names":[],"mappings":"AAAA;AACA;AACA;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.min.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function(e){\n})\n","var $ = jQuery.noConflict();\n\nvar custom_form = {\n\n    vars: {\n        form_id: \"register-form\",\n        honeypot_id: \"petname\",\n        error_messages_id: \"errors\",\n        endpoint: \"/wp-json/dmh/v1/submit_form\",\n        is_loading: false,\n        loading_el: document.querySelector('.form-wrapper .loading')\n    },\n\n    post_data: async function (url = \"\", data = {}) {\n        const response = await fetch(url, {\n            method: \"POST\",\n            credentials: \"same-origin\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            redirect: \"follow\",\n            body: JSON.stringify(data)\n        });\n        return await response.json();\n    },\n\n    send_entry: function (form_data) {\n        custom_form.post_data(custom_form.vars.endpoint, form_data).then(data => {\n            custom_form.check_validity(data);\n        });\n    },\n\n    check_validity: function (data) {\n        //console.log(data.is_valid);\n        if (data.is_valid == false) {\n            custom_form.show_errors(data.validation_messages)\n        } else {\n            //console.log(data.confirmation_message);\n            custom_form.thank_you(data.confirmation_message);\n        }\n        custom_form.hide_loader();\n    },\n\n    show_errors: function (errors) {\n\n\n        // Print error message in top\n        /*\n        var error_messages = document.getElementById(custom_form.vars.error_messages_id);\n\n        error_messages.innerHTML = \"\";\n        var messages = ``\n        messages += `<ul>`\n        for (let [key, value] of Object.entries(errors)) {\n            messages += `<li id=\"field${key}\">${value}</li>`\n        }\n        messages += `</ul>`\n        error_messages.innerHTML = messages\n\n\n        // Remove error labels\n        document.querySelectorAll('.form-wrap input').forEach(input => {\n            input.parentNode.classList.remove('error')\n            input.removeAttribute('aria-describedby')\n            input.removeAttribute('aria-invalid')\n        })\n        */\n\n       document.querySelectorAll('.input-box').forEach(input => {\n           input.classList.remove('error')\n           if(input.querySelector('.error-message')) input.querySelector('.error-message').remove()\n       })\n       \n        for (let [key, value] of Object.entries(errors)) {\n\n\n            let error_field = document.getElementById('input_' + key);\n            error_field.classList.add('error')\n\n            let error = document.createElement(\"span\")\n            error.classList.add('error-message')\n            var error_message = document.createTextNode(value)\n            error.appendChild(error_message)\n            error_field.appendChild(error)\n            \n        }        \n\n    },\n\n    thank_you: function (message) {\n\n        // GTM\n        //dataLayer.push({'event': 'registerComplete'});\n\n        var inital_content = document.querySelector('.modal--content .form-content')\n        var thank_you = document.querySelector('.modal--content .thank-you')\n\n        //console.log(inital_content);\n        $(inital_content).fadeOut(200, function () {\n            thank_you.innerHTML = message;\n            thank_you.classList.add('visible');\n            $(thank_you).fadeIn(200);\n        })\n\n        $('a[form-close]').focus();\n\n        // Analytics\n        /*\n        dataLayer.push({\n          event: 'pageview',\n          page: {\n            path: '/successful-submission',\n            title: 'Successful Submission'\n          }\n        });\n        */\n\n    },\n\n\n    show_loader: function () {\n        custom_form.vars.is_loading = true;\n\n        if (custom_form.vars.loading_el == null)\n            custom_form.vars.loading_el = document.querySelector('.modal-content .loading')\n\n        custom_form.vars.loading_el.style.display = 'flex'\n        window.setTimeout(function () {\n            custom_form.vars.loading_el.style.opacity = '1'\n        }, 50)\n    },\n\n    hide_loader: function () {\n        custom_form.vars.is_loading = false;\n        custom_form.vars.loading_el.style.opacity = '0'\n        window.setTimeout(function () {\n            custom_form.vars.loading_el.style.display = 'none'\n        }, 400)\n    },\n\n    hideLabelForField: function (target) {\n        var label = document.querySelector('label[for=\"' + target.id + '\"]');\n\n        if (target.value) {\n            label.classList.add('visuallyhidden');\n        } else {\n            label.classList.remove('visuallyhidden');\n        }\n    },\n\n    labelFocusIn: function () {\n        document.addEventListener(\"focusin\", (e) => {\n            if (e.target.classList.contains('label-text')) {\n                if (e.target.value == \"\") {\n                    var label = document.querySelector('label[for=\"' + e.target.id + '\"]');\n                    label.classList.add('visuallyhidden');\n                }\n            }\n        });\n    },\n\n    labelFocusOut: function () {\n        document.addEventListener(\"focusout\", (e) => {\n            if (e.target.classList.contains('label-text')) {\n                custom_form.hideLabelForField(e.target);\n            }\n        });\n    },\n\n    labelChange: function () {\n        document.addEventListener(\"change\", (e) => {\n            if (e.target.classList.contains('label-text')) {\n                var label = document.querySelector('label[for=\"' + e.target.id + '\"]');\n                if (e.target.value) {\n                    label.classList.add('visuallyhidden');\n                } else {\n                    label.classList.remove('visuallyhidden');\n                }\n            }\n        });\n    },\n\n    getSelectValues: function (select) {\n        var result = [];\n        var options = select && select.options;\n        var opt;\n\n        for (var i = 0, iLen = options.length; i < iLen; i++) {\n            opt = options[i];\n\n            if (opt.selected) {\n                result.push(opt.value || opt.text);\n            }\n        }\n        return result;\n    },\n\n    bind_events: function () {\n\n        //console.log(window.location.hash)\n\n        if(window.location.hash.includes('#register')) {\n            modal.openModal('register')\n        }\n\n        if(window.location.hash.includes('#privacy-policy')) {\n            modal.openModal('privacy')\n        }        \n\n        var gform = document.getElementById(custom_form.vars.form_id);\n        var inputs = document.querySelectorAll(\"#\" + custom_form.vars.form_id + \" input, #\" + custom_form.vars.form_id + \" textarea\");\n        var selects = document.querySelectorAll(\"#\" + custom_form.vars.form_id + \" select\");\n\n        custom_form.labelFocusIn();\n        custom_form.labelFocusOut();\n        custom_form.labelChange();\n\n        gform.addEventListener('submit', e => {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n\n            if (custom_form.vars.is_loading == true) {\n                //console.log('was loading')\n                return\n            }\n\n            custom_form.show_loader();\n\n            var honeypot = document.getElementById(custom_form.vars.honeypot_id);\n            if (honeypot.value != \"\") {\n                console.log('No funny business!')\n                alert('There was an issue submitting your form. Please try again.')\n                return\n            }\n\n            var form_data = {};\n\n            // Input values\n            var inputs = [].slice.call(e.target.getElementsByTagName('input'));\n            inputs.forEach(input => {\n\n                //console.log(input.type);\n\n                if (input.type == 'checkbox') {\n                    if (input.checked) {\n                        form_data[input.name] = 'YES'\n                        //console.log(\"CHECKED\")\n                    }\n                } else if (input.type == 'radio') {\n                    if (input.checked) {\n                        form_data[input.name] = input.value\n                        //console.log(\"CHECKED\")\n                    }\n                } else {\n                    form_data[input.name] = input.value;\n                }\n\n            });\n\n            // Select values\n            var selects = [].slice.call(e.target.getElementsByTagName('select'));\n            selects.forEach(select => {\n                if (select.multiple) {\n                    form_data[select.name] = custom_form.getSelectValues(select);\n                } else {\n                    form_data[select.name] = select.options[select.selectedIndex].value;\n                }\n            });\n\n            // Textarea values\n            var textareas = [].slice.call(e.target.getElementsByTagName('textarea'));\n            textareas.forEach(textarea => {\n                form_data[textarea.name] = textarea.value;\n            });            \n\n            custom_form.send_entry(form_data)\n        })\n\n        inputs.forEach(input => {\n            input.addEventListener('focus', e => {\n                if(input.type != 'checkbox'){\n                    input.parentNode.classList.add('label-top');\n                }\n            })\n\n            input.addEventListener('blur', e => {\n                if (input.value == \"\" && input.type != 'checkbox') {\n                    input.parentNode.classList.remove('label-top');\n                }\n            })\n        })\n\n        selects.forEach(select => {\n            select.addEventListener('change', e => {\n                //console.log(select.options[select.selectedIndex].value);\n                //console.log('CHANGES')\n\n                if (select.options[select.selectedIndex].value != \"\") {\n                    select.closest('.input-box').classList.add('label-top');\n                } else {\n                    select.closest('.input-box').classList.remove('label-top');\n                }\n\n            })\n        })\n\n        /*\n        let check = document.getElementById('input_22');\n        check.addEventListener('change', e => {\n            check.parentNode.classList.toggle('checked')\n        })\n        */\n\n        document.querySelectorAll('a[href=\"#register\"]').forEach(link => {\n            link.addEventListener('click', e =>{\n                modal.openModal('register')\n            })\n        })\n    },\n\n    modal_focus_trap: function () {\n        var element = document.getElementById('registerModal');\n        var focusableEls = element.querySelectorAll('a[href]:not([disabled]), button:not([disabled]), textarea:not([disabled]), input[type=\"text\"]:not([disabled]), input[type=\"radio\"]:not([disabled]), input[type=\"checkbox\"]:not([disabled]), select:not([disabled])'),\n            firstFocusableEl = focusableEls[0];\n        lastFocusableEl = focusableEls[focusableEls.length - 1];\n        KEYCODE_TAB = 9;\n\n        element.addEventListener('keydown', function (e) {\n            var isTabPressed = (e.key === 'Tab' || e.keyCode === KEYCODE_TAB);\n\n            if (!isTabPressed) {\n                return;\n            }\n\n            if (e.shiftKey) /* shift + tab */ {\n                if (document.activeElement === firstFocusableEl) {\n                    lastFocusableEl.focus();\n                    e.preventDefault();\n                }\n            } else /* tab */ {\n                if (document.activeElement === lastFocusableEl) {\n                    firstFocusableEl.focus();\n                    e.preventDefault();\n                }\n            }\n\n        });\n    },\n\n\n    init: function () {\n        custom_form.bind_events();\n    }\n\n}\n\n\ndocument.addEventListener('DOMContentLoaded', function () {\n    if(document.getElementById(custom_form.vars.form_id)){\n        custom_form.init();\n    }\n})\n","const global = {\n\n    init: () => {\n        global.bindEvents();\n        global.parallax();\n        global.scroller();\n    },\n\n\n    bindEvents: () => {\n\n        document.querySelectorAll('[expand]').forEach(expand => {\n            expand.addEventListener('click', e => {\n                expand.closest('.expandable').classList.toggle('active')\n            })\n        })\n    },\n\n    parallax: () => {\n        var image = document.getElementsByClassName('parallax');\n        new simpleParallax(image, {\n            //customWrapper: document.getElementById('header'),\n        });        \n    },\n\n    scroller: () => {\n        // instantiate the scrollama\n        const scroller = scrollama();\n\n        // setup the instance, pass callback functions\n        scroller\n        .setup({\n            step: \".section\",\n            offset: 0.2\n        })\n        .onStepEnter(response => {\n            // { element, index, direction }\n            console.log(response.index)\n\n            if(response.index == 1){\n                document.querySelector('.what.section').classList.add('animate')\n            }            \n\n            if(response.index == 3){\n                document.querySelector('.who.section').classList.add('animate')\n            }\n\n            if(response.index == 2){\n                document.querySelector('.how p.large').classList.add('animate')\n            }\n\n            if(response.index == 4){\n                document.querySelectorAll('.expandables .expandable').forEach(item => {\n                    item.classList.add('animate')\n                })\n            }\n        })\n        .onStepExit(response => {\n            // { element, index, direction }      \n            document.querySelector('.who.section').classList.remove('animate')\n            document.querySelector('.how p.large').classList.remove('animate')            \n        });\n\n        // setup resize event\n        window.addEventListener(\"resize\", scroller.resize);        \n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', function (e) {\n    global.init();\n})","const modal = {\n    \n    current_modal: null,\n\n    init: () => {\n        modal.bindEvents();\n    },\n\n    openModal: (target) => {\n        modal.current_modal = document.getElementById(target);\n        modal.current_modal.classList.add('open')\n        modal.lockBody()\n    },\n    \n    closeModal: () => {\n        modal.current_modal.classList.remove('open')        \n        modal.unlockBody()\n        //modal.stopVideo()\n    },\n\n    stopVideo: () => {\n        if(modal_videos.current_video || modal_videos.yt_player){\n            window.setTimeout(function(){\n                videos.stopVideo()\n            }, 1000)\n        }\n    },\n\n    lockBody: () => {\n        document.documentElement.classList.add('locked');\n    },\n\n    unlockBody: () => {\n        document.documentElement.classList.remove('locked');\n    },\n\n    bindEvents: () => {\n        /*\n        let open_buttons = document.querySelectorAll('[modal-open]')\n        open_buttons.forEach(button => {\n            button.addEventListener('click', function(e){\n                let target = button.getAttribute('modal');\n                modal.openModal(target)\n                console.log(target)\n                // GTM\n                //if(target == 'register') dataLayer.push({'event': 'registerOpen'});\n            })\n        })\n        */\n\n        document.querySelectorAll('a[href=\"#modal-contact\"]').forEach(button => {\n            button.addEventListener('click', e => {\n                modal.openModal('register')\n            })\n        })\n\n        document.querySelectorAll('a[href=\"#modal-terms\"]').forEach(button => {\n            button.addEventListener('click', e => {\n                modal.openModal('terms')\n            })\n        })\n        \n        document.querySelectorAll('a[href=\"#modal-privacy\"]').forEach(button => {\n            button.addEventListener('click', e => {\n                modal.openModal('privacy')\n            })\n        })        \n\n        let close_buttons = document.querySelectorAll('[modal-close]')\n        close_buttons.forEach(button => {\n            button.addEventListener('click', function(e){\n                modal.closeModal()\n            })\n        })\n\n        let modal_bg = document.querySelectorAll('.modal--bg');\n        modal_bg.forEach(bg => {\n            bg.addEventListener('click', function(e){\n                modal.closeModal()\n            })\n        })\n\n        // Close modal with ESC\n        document.onkeyup = function(evt) {\n            evt = evt || window.event;\n            var isEscape = false;\n            if (\"key\" in evt) {\n                isEscape = (evt.key === \"Escape\" || evt.key === \"Esc\");\n            } else {\n                isEscape = (evt.keyCode === 27);\n            }\n            if (isEscape) {\n                modal.closeModal()\n            }\n        };        \n    }\n}\n\ndocument.addEventListener('DOMContentLoaded', function(e){\n    modal.init();\n})","document.addEventListener(\"DOMContentLoaded\", function () {\n\n\n    let sliders = []\n    let slider_els = document.querySelectorAll('.swiper-container');\n\n    slider_els.forEach(function (slider_el) {\n\n        //console.log('slider initted')\n\n        let numslides = slider_el.querySelectorAll('.swiper-slide').length;\n        let next = slider_el.parentNode.querySelector('.swiper-next')\n        let prev = slider_el.parentNode.querySelector('.swiper-prev')\n\n        //console.log(next) \n\n        if (numslides > 1) {\n            let slider = new Swiper(slider_el, {\n                speed: 400,\n                autoplay: {\n                    delay: 15000,\n                },\n                loop: true,\n                //centeredSlides: true,\n                navigation: {\n                    nextEl: next,\n                    prevEl: prev,\n                },\n                slideToClickedSlide: true,\n                slidesPerView: 2,\n                spaceBetween: 16,\n                breakpoints: {\n                    480: {\n                        slidesPerView:3,\n                        spaceBetween: 16\n                    },\n                    // when window width is >= 640px\n                    768: {\n                        slidesPerView: 4,\n                        spaceBetween: 16\n                    },\n                    1028: {\n                        slidesPerView: 5,\n                        spaceBetween: 16\n                    }                    \n                },                    \n                //effect: 'fade',\n                //fadeEffect: {\n                //crossFade: true\n                //},\n            });\n\n            sliders.push(slider)\n        }\n\n    })\n\n});\n\n\n"]}